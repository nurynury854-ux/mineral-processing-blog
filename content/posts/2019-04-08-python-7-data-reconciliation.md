---
title: "Баяжуулагч инженерүүдэд зориулсан Python №7"
date: "2019-04-08"
excerpt: "Илүүдэл мэдээллээр баяжуулалтын масс-балансыг бодох ба хэмжилтийн алдааг засварлах нь. Баяжуулах процесс, технологийн схемийн балансыг тооцоход сорьцлолт, хэмжилт, химийн шинжилгээний үр дүнгүүд тодорхой алдаатай санамсаргүй хэмжигдэхүүн байдаг."
tags: ["Python", "Data Reconciliation", "Mass Balance", "Statistics"]
language: "mn"
views: 0
---

## "Илүүдэл мэдээлэл"-ээр масс баланс

Баяжуулах процесс, технологийн схемийн балансыг тооцоход сорьцлолт, хэмжилт, химийн шинжилгээний үр дүнгүүд тодорхой алдаатай санамсаргүй хэмжигдэхүүн байдаг.

Иймээс балансын тооцооны үед бүтээгдэхүүний тоо хэмжээ, гарц, металл авалт зэрэг нь мөн л алдаатай байдаг.

### Математик загвар

В.А.Уйлссын "Эрдэс боловсруулалтын технологи" номд байдаг нэгэн жишээг Python ашиглан бодъё.

Флотацийн үйлдвэрийн 3 урсгал (тэжээл, баяжмал, хаягдал)-д 5 металл (Al, Fe, Cu, Zn, Pb) тодорхойлсон.

### Аргачлал

Бүх металлын агуулгуудыг ашиглан балансын тэгшитгэлийг бичвэл:

$$c_i y_1 + t_i (1-y_1) - f_i = \\delta_i$$

Үүнд:
- $c_i, t_i, f_i$ - баяжмал, хаягдал ба тэжээлийн металлын агуулга
- $\\delta_i$ - балансын алдаа
- $y_1$ - баяжмалын гарц

Алдаануудын квадратуудын нийлбэрийг хамгийн бага болгох:

$$\\sum_{i=1}^{m} \\delta_i^2 = \\min$$

### Python код

```python
import numpy as np
from scipy.optimize import least_squares

# Өгөгдөл
metals = ['Al', 'Fe', 'Cu', 'Zn', 'Pb']
concentrate = np.array([13.9, 16.5, 27.4, 32.6, 9.6])  # %
tailings = np.array([12.1, 14.2, 2.1, 3.5, 0.3])       # %
feed = np.array([12.5, 14.8, 8.7, 11.2, 2.9])          # %

def objective(y):
    """Зорилго функц - алдаануудын квадратын нийлбэр"""
    c, t, f = concentrate, tailings, feed
    errors = c * y + t * (1 - y) - f
    return errors

# Анхны өгөгдөл - тус бүр металлаар
y_initial = np.zeros(len(metals))
for i in range(len(metals)):
    y_initial[i] = (feed[i] - tailings[i]) / (concentrate[i] - tailings[i])

print("Анхны гарцууд (металл тус бүрээр):")
for metal, y in zip(metals, y_initial):
    print(f"{metal}: {y*100:.2f}%")

# Илүүдэл мэдээллээр засварлах
result = least_squares(objective, x0=y_initial.mean(), bounds=(0, 1))
y_reconciled = result.x[0]

print(f"\nЗасварласан гарц: {y_reconciled*100:.2f}%")

# Засварласан агуулгууд
conc_rec = (feed - tailings * (1 - y_reconciled)) / y_reconciled
tail_rec = (feed - concentrate * y_reconciled) / (1 - y_reconciled)

print("\nЗасварласан агуулгууд:")
print("Металл  | Анхны баяжмал | Засварласан | Анхны хаягдал | Засварласан")
print("-" * 70)
for i, metal in enumerate(metals):
    print(f"{metal:7} | {concentrate[i]:14.2f} | {conc_rec[i]:11.2f} | "
          f"{tailings[i]:13.2f} | {tail_rec[i]:11.2f}")

# Металл авалт
recoveries = y_reconciled * conc_rec / feed * 100
print("\nМеталл авалтууд:")
for metal, rec in zip(metals, recoveries):
    print(f"{metal}: {rec:.2f}%")
```

### Үр дүн

Программ нь:
1. Металл тус бүрээр гарцыг тооцоолно
2. Хамгийн бага квадратын аргаар нэг гарц олно
3. Агуулгуудыг засварлана
4. Металл авалтыг тооцоолно

## Дүгнэлт

Илүүдэл мэдээллийн арга нь:
- Хэмжилтийн алдааг багасгана
- Найдвартай үр дүн өгнө
- Масс балансыг хангуулна
- Python дээр хэрэгжүүлэхэд хялбар

SciPy-ийн `least_squares` функц нь энэ төрлийн бодлогод маш тохиромжтой.
